# 使用注释配置

### 一. 还原参数的key

在app配置文件url字段字段部分，当type=1时, 在方法体内部使用 `$this->params` 属性默认获得的参数是一个数字索引数组,这时可以在方法体的注释中使用 `@cp_params` 指定了参数的key,格式为 `@cp_params 参数1, 参数2...` 如下例:

 	namespace app\web\controllers;

	use Cross\MVC\Controller;
	
	class User extends Controller
	{
	    /**
	     * 默认控制器
	     * @cp_params p1, p2, p3
	     */
		function index()
		{
			print_r($this->params);
		}
	}
	
此时打印的结果为：
	
	Array ( [p1] => 1 [p2] => 2 [p3] => 3 ) 
	
使用其他模式时打印结果均为

	Array ( [p1] => 1 [p2] => 2 [p3] => 3 ) 

>`@cp_params` 只有`type=1`时生效， 为保持程序的一致性使用`@cp_params`时，指定的参数应与生成的连接的参数保存一致 

### 二. 为Action配置缓存

在注释中使用 `@cp_cache` 字段指定该Action的缓存

 	namespace app\web\controllers;

	use Cross\MVC\Controller;
	
	class User extends Controller
	{
	    /**
	     * 默认控制器
	     * @cp_params p1, p2, p3
	     * @cp_cache false(type=1, expire_time=864000)
	     */
		function index()
		{
			print_r($this->params);
		}
	}

配置的格式为 `true/false(key=value, key=value...)` 多个key和value用逗号分隔 `true` 或 `false` 分别代表配置的开关.

1. 使用文件缓存 `true(type=1, expire_time=864000)`

		type = 1
		expire_time = 86400 表示缓存过期时间为1天
		cache_path 表示缓存文件放在web索引文件的跟目录,默认放在项目的cache/html文件夹下
		file_ext 缓存文件扩展名 默认为.html
	
	>项目根目录下的cache目录需设置为可以读写

2. 使用memcache缓存 `true(type=2, host=127.0.0.1, port=11211, expire_time=30)`
				
		type=2
		host=127.0.0.1
		port=11211
		expire_time=30

3. 使用redis缓存 `true(type=3, host=127.0.0.1, db=3, port=6379, expire_time=864000)`

		type=3, 
		host=127.0.0.1, 
		port=6379, 
		db=3 使用的db id
		expire_time=864000 key的生存时间

使用缓存后Dispatcher流程会跳过app模型中该Action的逻辑,直接从缓存读取数据返回给客户端, 合理的使用缓存能大幅度提高应用性能.

>使用op_cache的时候注意与注释相关参数的设置